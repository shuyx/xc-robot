# XC-ROBOT 项目概述

## 🤖 项目简介

XC-ROBOT是一个**轮式双臂类人形机器人控制系统**，专为机器人预研和功能测试而设计。该项目基于XC-OS（祥承操作系统）的模块化架构，提供了完整的双臂移动机器人控制解决方案。

## 📋 基本信息

- **项目名称**: XC-ROBOT (祥承机器人)
- **版本**: v2.3.2 (当前稳定版本)
- **开发语言**: Python 3.x
- **主要框架**: PyQt5 (GUI) + VTK (3D可视化) + FR3 API (机械臂控制)
- **开发环境**: 虚拟环境 (venv)
- **许可证**: 见 LICENSE 文件

## 🔧 硬件平台

### 主要设备
- **移动底盘**: 思岚科技 Hermes 轮式底盘
- **机械臂**: 法奥意威 FR3 双机械臂系统
- **视觉系统**: Gemini 335系列相机
- **控制器**: 支持多平台的控制计算机

### 网络架构
```
控制计算机 (192.168.58.1)
├── 右臂FR3 (192.168.58.2)
├── 左臂FR3 (192.168.58.3)
└── Hermes底盘 (192.168.31.211:1448)
```

## 🎯 核心功能

### 1. 硬件控制
- FR3双机械臂的单臂/双臂协调控制
- Hermes移动底盘的导航和运动控制
- 视觉系统集成和图像处理
- 末端执行器和传感器控制

### 2. 仿真系统
- 基于VTK的3D机器人运动仿真
- 2D底盘轨迹可视化和交互式路径绘制
- 实时运动学计算和可视化
- 混合仿真环境支持

### 3. 用户界面
- PyQt5构建的现代化GUI界面
- 5个主要功能模块的选项卡设计
- 实时日志系统和状态监控
- 跨平台兼容性支持

### 4. 运动学计算
- FR3机械臂的正向/逆向运动学求解
- 双臂协调运动规划
- 碰撞检测和安全避障
- 轨迹优化和平滑处理

## 🏗️ 系统架构

XC-OS采用分层模块化架构设计：

```
┌─────────────────────────────────────────────────────────────────┐
│                         XC-OS 应用层                             │
├─────────────────────────────────────────────────────────────────┤
│  GUI控制台 │ Web界面 │ CLI工具 │ ROS接口 │ 第三方应用          │
├─────────────────────────────────────────────────────────────────┤
│                      XC-OS 核心服务层                            │
├─────────────────────────────────────────────────────────────────┤
│ 任务管理器 │ 行为树引擎 │ 数据管道 │ 事件总线 │ 配置中心      │
├─────────────────────────────────────────────────────────────────┤
│                    智能计算层 (AI Layer)                         │
├─────────────────────────────────────────────────────────────────┤
│ 大模型接口 │ 视觉算法 │ SLAM │ 运动规划 │ 决策引擎           │
├─────────────────────────────────────────────────────────────────┤
│                  硬件抽象层 (HAL)                               │
├─────────────────────────────────────────────────────────────────┤
│ 机械臂驱动 │ 底盘驱动 │ 视觉驱动 │ 末端执行器 │ 传感器驱动   │
├─────────────────────────────────────────────────────────────────┤
│                     硬件设备层                                   │
├─────────────────────────────────────────────────────────────────┤
│ FR3双臂 │ Hermes底盘 │ 相机阵列 │ 夹爪/工具 │ 激光雷达       │
└─────────────────────────────────────────────────────────────────┘
```

## 📁 项目结构

```
xc-robot/
├── 📄 主要文件
│   ├── main.py                    # 主程序入口
│   ├── start_gui.py              # GUI启动脚本
│   ├── quick_start.py            # 快速设备检查
│   ├── requirements.txt          # Python依赖
│   └── robot_config.yaml         # 机器人配置
│
├── 🖥️ GUI界面模块
│   ├── gui/
│   │   ├── main_window.py        # 主窗口
│   │   ├── gui_main.py          # GUI主程序
│   │   └── widgets/             # 界面控件
│   │       ├── connection_widget.py    # 连接测试
│   │       ├── arm_control_widget.py   # 机械臂控制
│   │       ├── chassis_widget.py       # 底盘控制
│   │       ├── simulation_widget.py    # 仿真系统
│   │       ├── robot_sim_widget.py     # 3D仿真
│   │       └── log_widget.py           # 日志显示
│
├── 🤖 机械臂控制
│   ├── fr3_control/
│   │   ├── fairino/             # FR3 SDK
│   │   └── example/             # 示例代码
│
├── 🎮 主控制器
│   ├── main_control/
│   │   ├── integrated_controller.py    # 集成控制器
│   │   ├── dual_arm_controller.py      # 双臂控制器
│   │   ├── robot_controller.py         # 机械臂控制器
│   │   └── hermer_controller.py        # 底盘控制器
│
├── 🧪 测试模块
│   ├── tests/                   # 单元测试
│   ├── function_test/           # 功能测试
│   └── fr3_hermes_testing/      # 集成测试
│
├── 📚 文档资料
│   ├── Md_files/               # 技术文档
│   ├── fr3_datas/              # FR3相关文档
│   ├── hermes_datas/           # Hermes相关文档
│   └── vision_datas/           # 视觉系统文档
│
└── 🛠️ 工具和配置
    ├── tools/                  # 开发工具
    ├── config/                 # 配置文件
    └── models/                 # 3D模型文件
```

## 🖥️ GUI界面功能

GUI基于PyQt5构建，采用选项卡式设计，包含以下5个主要功能模块：

### 1. 🔗 连接测试
- 测试与FR3双臂和Hermes底盘的网络连通性
- 配置和保存设备IP地址
- 多线程并行连接测试
- 实时状态显示和详细测试结果

### 2. 🤖 机械臂控制
- 单臂控制：左臂/右臂独立操作
- 双臂协调：镜像运动、协调动作
- 关节点动：6个关节的精确控制
- 预设动作：抓取准备、挥手等动作序列
- 实时状态监控和安全控制

### 3. 🚛 底盘控制
- 手动控制：8方向控制盘
- 坐标导航：精确位姿控制
- 预设位置：工作站、充电站快速导航
- 实时状态：位置、电量、运动状态显示

### 4. 🎮 仿真系统
- **2D底盘仿真**：交互式路径绘制和播放
- **3D机械臂仿真**：火柴人风格实时渲染
- **轨迹分析**：加载主控程序自动提取轨迹
- **播放控制**：独立的播放、暂停、速度控制

### 5. 🤖 RobotSim (VTK 3D仿真)
- 高精度3D机器人模型可视化
- STL模型加载和渲染
- 关节角度实时控制
- 逆运动学求解和目标位姿控制
- 交互式3D视图操作

## 🚀 快速开始

### 环境要求
- **操作系统**: Windows 10/11, macOS, Linux (Ubuntu/Debian)
- **Python版本**: 3.7+
- **主要依赖**: PyQt5, VTK, NumPy, Requests

### 安装和启动

1. **克隆项目**
```bash
git clone <repository-url>
cd xc-robot
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **启动GUI界面**
```bash
python start_gui.py
```

4. **快速设备检查**
```bash
python quick_start.py
```

5. **启动集成控制器**
```bash
python main.py
```

### 配置说明

主要配置文件：
- `robot_config.yaml`: 机器人硬件配置
- `config/platform_configs.json`: 平台特定配置
- `config/gui_config_*.json`: GUI界面配置

## 🔧 技术特色

### 1. 跨平台支持
- 完整的Windows、macOS、Linux支持
- 自动化平台差异处理
- 统一的配置管理系统

### 2. 模块化设计
- 松耦合的模块架构
- 支持热插拔的功能组件
- 标准化的硬件抽象接口

### 3. 双臂协调控制
- 完整的双臂安全避障模型
- 碰撞检测和工作空间验证
- 协调运动规划和执行

### 4. 混合仿真系统
- 2D+3D混合仿真环境
- 实时运动学可视化
- 交互式轨迹编辑和播放

### 5. 延迟加载机制
- 解决VTK与PyQt5的初始化冲突
- 优化启动性能
- 模块化的资源管理

## 🧪 测试和验证

### 单元测试
```bash
# FR3连接测试
python tests/fr3_simple_test.py 192.168.58.2

# 双臂连接测试
python tests/dual_arm_connection.py

# 底盘连接测试
python tests/hermes_test_connection.py
```

### 集成测试
```bash
# 完整系统测试
python tests/integrated_test.py

# 仿真系统测试
python function_test/test_dual_arm_simulation.py
```

### 功能测试
- 连接测试：验证所有硬件设备的网络连通性
- 运动测试：验证机械臂和底盘的基本运动功能
- 仿真测试：验证仿真系统的准确性和稳定性
- 安全测试：验证碰撞检测和紧急停止功能

## 📖 相关文档

详细的技术文档位于 `Md_files/` 目录：

- **[项目技术全览](Md_files/PROJECT_TECHNICAL_OVERVIEW.md)**: 完整的技术架构说明
- **[GUI界面描述](Md_files/GUI_DESCRIPTION.md)**: 详细的界面功能说明
- **[FR3机械臂分析](Md_files/FR3_ROBOT_ANALYSIS.md)**: 机械臂运动学分析
- **[部署指南](Md_files/DEPLOYMENT_GUIDE.md)**: 安装部署和问题解决
- **[机器人仿真指南](Md_files/ROBOTSIM_GUIDE.md)**: 仿真系统使用说明
- **[双臂集成指南](dual_arm_integration_guide.md)**: 双臂安全控制说明

## 🛠️ 开发和扩展

### 添加新硬件设备
1. 在 `main_control/` 下创建新的控制器类
2. 实现标准的硬件抽象接口
3. 在 `gui/widgets/` 下创建对应的控件
4. 更新配置文件和测试脚本

### 扩展仿真功能
1. 在 `gui/widgets/simulation_widget.py` 中添加新的仿真模式
2. 扩展 `fr3_kinematics.py` 的运动学计算功能
3. 在 `models/` 目录下添加新的3D模型文件

### 自定义GUI界面
1. 在 `gui/widgets/` 下创建新的控件类
2. 在 `main_window.py` 中注册新的选项卡
3. 实现信号槽机制与其他模块通信

## 🤝 贡献指南

1. Fork 项目仓库
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

## 📞 支持和反馈

如有问题或建议，请通过以下方式联系：

- 创建 GitHub Issue
- 查看 `Md_files/` 目录下的详细文档
- 参考 `fr3_hermes_testing/` 目录下的测试指南

## 🔮 未来规划

- [ ] 集成更多类型的机械臂和底盘
- [ ] 添加视觉系统的完整集成
- [ ] 实现基于AI的智能决策模块
- [ ] 开发Web端控制界面
- [ ] 添加ROS接口支持
- [ ] 完善安全监控和故障诊断系统

---

**项目状态**: 活跃开发中  
**最后更新**: 2025-01-27  
**维护团队**: XC-ROBOT Development Team