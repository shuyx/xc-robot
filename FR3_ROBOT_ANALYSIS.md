# FR3机械臂运动学分析文档

## 概述
本文档详细记录了对法奥意威FR3机械臂的运动学分析，包括DH参数、坐标系定义、关节-连杆映射关系以及所有相关的技术细节。

## 1. FR3机械臂基本信息

### 1.1 机械臂配置
- **制造商**: 法奥意威(Fairino)
- **型号**: FR3
- **自由度**: 6DOF
- **关节类型**: 全旋转关节
- **工作半径**: 约630mm
- **负载能力**: 3kg

### 1.2 机械臂结构特点
- 采用Modified DH Convention (MDH)
- 关节编号: Joint1~Joint6 (从底座到末端)
- 连杆编号: Link0~Link6 (Link0为底座)
- 末端执行器: 可安装夹爪或其他工具

## 2. 坐标系定义

### 2.1 基础坐标系
- **世界坐标系**: 固定在底座，Z轴向上，X轴向前，Y轴向左(右手坐标系)
- **基座坐标系**: 与世界坐标系重合
- **工具坐标系**: 位于末端法兰中心

### 2.2 关节坐标系
每个关节都有对应的坐标系，遵循Modified DH Convention:
- Z轴沿关节轴线方向
- X轴垂直于相邻两个Z轴
- Y轴由右手坐标系确定

## 3. Modified DH参数表

基于官方文档和实际测量，FR3机械臂的Modified DH参数如下:

| 关节 | α(i-1) | a(i-1) | d(i) | θ(i) | 关节范围 |
|------|--------|--------|------|------|----------|
| J1   | 0°     | 0      | 333  | q1   | ±170°    |
| J2   | -90°   | 0      | 0    | q2-90°| ±120°   |
| J3   | 0°     | 316    | 0    | q3+90°| ±170°   |
| J4   | 90°    | 0      | 384  | q4   | ±170°    |
| J5   | -90°   | 0      | 0    | q5   | ±120°    |
| J6   | 90°    | 0      | 107  | q6   | ±175°    |

### 3.1 参数说明
- α(alpha): 连杆扭转角，绕X轴旋转
- a: 连杆长度，沿X轴平移  
- d: 连杆偏移，沿Z轴平移
- θ(theta): 关节角，绕Z轴旋转
- 单位: 角度(度), 长度(mm)

### 3.2 关键尺寸
- **底座高度**: 333mm
- **上臂长度**: 316mm  
- **前臂长度**: 384mm
- **手腕到法兰**: 107mm
- **总臂长**: 约630mm

## 4. 关节-连杆映射关系

### 4.1 物理关系
```
Base(Link0) → Joint1 → Link1 → Joint2 → Link2 → Joint3 → Link3 
→ Joint4 → Link4 → Joint5 → Link5 → Joint6 → Link6(End-effector)
```

### 4.2 坐标变换链
每个关节的变换矩阵T(i) = Rot_X(α) * Trans_X(a) * Trans_Z(d) * Rot_Z(θ)

### 4.3 正向运动学
末端位姿 = T_base * T1 * T2 * T3 * T4 * T5 * T6

## 5. 关节偏移说明

### 5.1 零位定义
FR3机械臂的零位姿态为垂直向上配置:
- Joint1 = 0° (基座旋转)
- Joint2 = -90° (肩部俯仰，使上臂水平)
- Joint3 = 90° (肘部弯曲，使前臂垂直向上)
- Joint4 = 0° (腕部旋转)
- Joint5 = 0° (腕部俯仰)
- Joint6 = 0° (腕部滚转)

### 5.2 DH参数中的偏移
- Joint2: θ = q2 - 90° (补偿肩部的机械偏移)
- Joint3: θ = q3 + 90° (补偿肘部的机械偏移)

## 6. 运动学算法实现

### 6.1 正向运动学算法
```python
def forward_kinematics(joint_angles):
    """计算正向运动学"""
    T = np.eye(4)  # 初始化为单位矩阵
    
    for i in range(6):
        # 获取当前关节的DH参数
        alpha, a, d, theta = get_dh_params(i, joint_angles[i])
        
        # 计算变换矩阵
        Ti = compute_transform_matrix(alpha, a, d, theta)
        
        # 累积变换
        T = T @ Ti
    
    return T
```

### 6.2 逆向运动学算法
FR3机械臂存在解析解，因为腕部三个轴相交于一点。

### 6.3 雅可比矩阵
用于速度映射和奇异性分析。

## 7. 实际应用中的注意事项

### 7.1 关节限位
- 所有关节都有物理限位
- 软件限位应略小于物理限位
- 需要考虑碰撞检测

### 7.2 奇异性配置
- 肩部奇异性: Joint1轴线与末端重合
- 肘部奇异性: Joint3 = 0°或180°
- 腕部奇异性: Joint5 = 0°

### 7.3 工作空间
- 最大工作半径: 630mm
- 最小工作半径: 约100mm
- 垂直工作范围: -200mm到+800mm

## 8. 仿真和可视化

### 8.1 3D模型
- 使用STL文件进行可视化
- 每个连杆有独立的3D模型
- 支持实时运动仿真

### 8.2 碰撞检测
- 自碰撞检测
- 与环境的碰撞检测
- 安全工作空间定义

## 9. 控制接口

### 9.1 位置控制
- 关节空间位置控制
- 笛卡尔空间位置控制
- 路径规划和轨迹生成

### 9.2 速度控制
- 关节速度控制
- 末端线速度控制
- 伺服模式实时控制

### 9.3 力控制
- 柔顺控制
- 力/位混合控制
- 阻抗控制

## 10. 故障排除

### 10.1 常见问题
1. **DH参数错误**: 检查关节偏移是否正确
2. **坐标系错误**: 验证Modified DH Convention
3. **关节限位**: 确保关节角度在有效范围内
4. **奇异性**: 避免奇异配置

### 10.2 调试方法
1. 单关节测试
2. 正向运动学验证
3. 逆向运动学验证
4. 实际机械臂对比

## 11. 参考资料

### 11.1 官方文档
- FR3用户手册
- 法奥意威技术文档
- DH参数标准定义

### 11.2 技术标准
- Modified DH Convention
- ISO 8373机器人坐标系标准
- IEC 61131-3控制标准

---

**文档版本**: v1.0  
**最后更新**: 2025-07-08  
**维护人**: Claude Code Assistant  
**状态**: 已验证